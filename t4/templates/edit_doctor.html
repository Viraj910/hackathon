<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Doctor - Hospital Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .form-card {
            border: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-radius: 15px;
        }
        .section-header {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-hospital me-2"></i>Hospital Admin
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">Patient Registration</a>
                <a class="nav-link" href="/view_submissions">Patient Submissions</a>
                <a class="nav-link" href="/admin/doctors">Doctor Admin</a>
                <a class="nav-link" href="/doctors">Public Doctors</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <div class="admin-header">
        <div class="container text-center">
            <h1 class="display-5 fw-bold">
                <i class="fas fa-user-edit me-3"></i>Edit Doctor Profile
            </h1>
            <p class="lead">Update {{ doctor.name }}'s information</p>
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card form-card">
                    <div class="card-body p-4">
                        <form method="POST" class="needs-validation" novalidate>
                            <!-- Personal Information -->
                            <div class="section-header">
                                <h4 class="mb-0">
                                    <i class="fas fa-user me-2"></i>Personal Information
                                </h4>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" id="name" name="name" 
                                           value="{{ doctor.name }}" required>
                                    <div class="invalid-feedback">Please provide a valid name.</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="specialization" class="form-label">Specialization *</label>
                                    <select class="form-control" id="specialization" name="specialization" required>
                                        <option value="">Select Specialization</option>
                                        <option value="Cardiology" {{ 'selected' if doctor.specialization == 'Cardiology' }}>Cardiology</option>
                                        <option value="Neurology" {{ 'selected' if doctor.specialization == 'Neurology' }}>Neurology</option>
                                        <option value="Orthopedics" {{ 'selected' if doctor.specialization == 'Orthopedics' }}>Orthopedics</option>
                                        <option value="Pediatrics" {{ 'selected' if doctor.specialization == 'Pediatrics' }}>Pediatrics</option>
                                        <option value="Dermatology" {{ 'selected' if doctor.specialization == 'Dermatology' }}>Dermatology</option>
                                        <option value="Psychiatry" {{ 'selected' if doctor.specialization == 'Psychiatry' }}>Psychiatry</option>
                                        <option value="General Medicine" {{ 'selected' if doctor.specialization == 'General Medicine' }}>General Medicine</option>
                                        <option value="Surgery" {{ 'selected' if doctor.specialization == 'Surgery' }}>Surgery</option>
                                        <option value="Gynecology" {{ 'selected' if doctor.specialization == 'Gynecology' }}>Gynecology</option>
                                        <option value="ENT" {{ 'selected' if doctor.specialization == 'ENT' }}>ENT</option>
                                        <option value="Ophthalmology" {{ 'selected' if doctor.specialization == 'Ophthalmology' }}>Ophthalmology</option>
                                        <option value="Radiology" {{ 'selected' if doctor.specialization == 'Radiology' }}>Radiology</option>
                                    </select>
                                    <div class="invalid-feedback">Please select a specialization.</div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="qualification" class="form-label">Qualification *</label>
                                    <input type="text" class="form-control" id="qualification" name="qualification" 
                                           value="{{ doctor.qualification }}" placeholder="e.g., MBBS, MD, MS" required>
                                    <div class="invalid-feedback">Please provide qualification.</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="experience" class="form-label">Experience (Years) *</label>
                                    <input type="number" class="form-control" id="experience" name="experience" 
                                           value="{{ doctor.experience }}" min="0" max="50" required>
                                    <div class="invalid-feedback">Please provide years of experience.</div>
                                </div>
                            </div>

                            <!-- Contact Information -->
                            <div class="section-header">
                                <h4 class="mb-0">
                                    <i class="fas fa-phone me-2"></i>Contact Information
                                </h4>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" 
                                           value="{{ doctor.phone }}" required>
                                    <div class="invalid-feedback">Please provide a valid phone number.</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" 
                                           value="{{ doctor.email }}" required>
                                    <div class="invalid-feedback">Please provide a valid email address.</div>
                                </div>
                            </div>

                            <!-- Hospital Information -->
                            <div class="section-header">
                                <h4 class="mb-0">
                                    <i class="fas fa-hospital me-2"></i>Hospital Information
                                </h4>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="department" class="form-label">Department *</label>
                                    <select class="form-control" id="department" name="department" required>
                                        <option value="">Select Department</option>
                                        <option value="Emergency" {{ 'selected' if doctor.department == 'Emergency' }}>Emergency</option>
                                        <option value="Cardiology" {{ 'selected' if doctor.department == 'Cardiology' }}>Cardiology</option>
                                        <option value="Neurology" {{ 'selected' if doctor.department == 'Neurology' }}>Neurology</option>
                                        <option value="Orthopedics" {{ 'selected' if doctor.department == 'Orthopedics' }}>Orthopedics</option>
                                        <option value="Pediatrics" {{ 'selected' if doctor.department == 'Pediatrics' }}>Pediatrics</option>
                                        <option value="Internal Medicine" {{ 'selected' if doctor.department == 'Internal Medicine' }}>Internal Medicine</option>
                                        <option value="Surgery" {{ 'selected' if doctor.department == 'Surgery' }}>Surgery</option>
                                        <option value="ICU" {{ 'selected' if doctor.department == 'ICU' }}>ICU</option>
                                        <option value="Outpatient" {{ 'selected' if doctor.department == 'Outpatient' }}>Outpatient</option>
                                    </select>
                                    <div class="invalid-feedback">Please select a department.</div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="room_number" class="form-label">Room Number *</label>
                                    <input type="text" class="form-control" id="room_number" name="room_number" 
                                           value="{{ doctor.room_number }}" placeholder="e.g., 201A, OPD-3" required>
                                    <div class="invalid-feedback">Please provide room number.</div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="schedule" class="form-label">Schedule</label>
                                    <input type="text" class="form-control" id="schedule" name="schedule" 
                                           value="{{ doctor.schedule }}" placeholder="e.g., Mon-Fri 9AM-5PM">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="consultation_fee" class="form-label">Consultation Fee</label>
                                    <input type="text" class="form-control" id="consultation_fee" name="consultation_fee" 
                                           value="{{ doctor.consultation_fee }}" placeholder="e.g., $100, â‚¹500">
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="languages" class="form-label">Languages Spoken</label>
                                <input type="text" class="form-control" id="languages" name="languages" 
                                       value="{{ doctor.languages }}" placeholder="e.g., English, Spanish, Hindi">
                            </div>

                            <div class="mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-control" id="status" name="status" required>
                                    <option value="active" {{ 'selected' if doctor.status == 'active' }}>Active</option>
                                    <option value="inactive" {{ 'selected' if doctor.status == 'inactive' }}>Inactive</option>
                                    <option value="on_leave" {{ 'selected' if doctor.status == 'on_leave' }}>On Leave</option>
                                </select>
                                <div class="invalid-feedback">Please select a status.</div>
                            </div>

                            <div class="mb-3">
                                <label for="bio" class="form-label">Biography/About</label>
                                <textarea class="form-control" id="bio" name="bio" rows="4" 
                                          placeholder="Brief description about the doctor's background, expertise, and achievements...">{{ doctor.bio }}</textarea>
                            </div>

                            <!-- Submit Buttons -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <div class="d-flex gap-3">
                                        <button type="submit" class="btn btn-success btn-lg">
                                            <i class="fas fa-save me-2"></i>Update Doctor Profile
                                        </button>
                                        <a href="/admin/doctors" class="btn btn-outline-secondary btn-lg">
                                            <i class="fas fa-times me-2"></i>Cancel
                                        </a>
                                        <a href="/doctors/{{ doctor.id }}" class="btn btn-outline-info btn-lg" target="_blank">
                                            <i class="fas fa-eye me-2"></i>View Public Profile
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Bootstrap form validation
        (function() {
            'use strict';
            window.addEventListener('load', function() {
                var forms = document.getElementsByClassName('needs-validation');
                var validation = Array.prototype.filter.call(forms, function(form) {
                    form.addEventListener('submit', function(event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
</body>
</html>
